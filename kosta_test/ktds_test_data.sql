DROP TABLE IF EXISTS stock;
DROP TABLE IF EXISTS store;
DROP TABLE IF EXISTS product;
DROP TABLE IF EXISTS discarded_product;
DROP TABLE IF EXISTS factory;

CREATE TABLE PRODUCT
(PDNO INT PRIMARY KEY,
PDNAME VARCHAR(10),
PDSUBNAME VARCHAR(10),
FACTNO VARCHAR(5),
PDDATE DATE,
PDCOST INT,
PDPRICE INT,
PDAMOUNT INT);

INSERT INTO PRODUCT VALUES
(20110001,'TV','INFINIA-01','98710','2010-12-17',830000,970000,200);
INSERT INTO PRODUCT VALUES
(20110002,'TV','INFINIA-02','98711','2010-01-01',1250000,1450000,0);
INSERT INTO PRODUCT VALUES
(20110003,'TV','XCANVAS-01','98711','2010-03-10',800000,1200000,null);
INSERT INTO PRODUCT VALUES
(20110004,'TV','XCANVAS-02','98712','2010-11-27',750000,770000,30);
INSERT INTO PRODUCT VALUES
(10100001,'WASHER','PA-01','98710','2009-02-17',240000,270000,null);
INSERT INTO PRODUCT VALUES
(10100002,'WASHER','PA-02','98710','2009-04-12',350000,370000,10);
INSERT INTO PRODUCT VALUES
(10100003,'WASHER','PA-03','98712','2009-03-17',450000,470000,200);
INSERT INTO PRODUCT VALUES
(10100004,'WASHER','PA-04','98713','2009-04-12',340000,390000,100);
INSERT INTO PRODUCT VALUES
(30100001,'CELLPHONE','OPTIMUS-01','98713','2010-03-18',830000,890000,20);
INSERT INTO PRODUCT VALUES
(30100002,'CELLPHONE','OPTIMUS-02','98713','2010-04-13',940000,990000,200);
INSERT INTO PRODUCT VALUES
(30100003,'CELLPHONE','OPTIMUS-03','98711','2010-04-03',630000,690000,50);
INSERT INTO PRODUCT VALUES
(30100004,'CELLPHONE','OPTIMUS-04','98710','2010-12-23',990000,1090000,300);


CREATE TABLE FACTORY
(FACTNO VARCHAR(5) PRIMARY KEY,
FACNAME VARCHAR(20),
FACLOC VARCHAR(13) );

INSERT INTO FACTORY VALUES (98710,'SEOUL FACTORY','SEOUL');
INSERT INTO FACTORY VALUES (98711,'PUSAN FACTORY','PUSAN');
INSERT INTO FACTORY VALUES (98712,'CHANGWON FACTORY','CHANGWON');
INSERT INTO FACTORY VALUES (98713,'OSAN FACTORY','OSAN');



CREATE TABLE STORE
(STONO VARCHAR(5) PRIMARY KEY,
STONAME VARCHAR(20)
);

INSERT INTO STORE VALUES (10710,'HI-MART');
INSERT INTO STORE VALUES (10711,'HI-MART');
INSERT INTO STORE VALUES (10712,'HI-MART');
INSERT INTO STORE VALUES (10713,'HI-MART');
INSERT INTO STORE VALUES (10714,'HI-MART');
INSERT INTO STORE VALUES (10715,'HI-MART');

INSERT INTO STORE VALUES (20710,'e-MART');
INSERT INTO STORE VALUES (20711,'e-MART');
INSERT INTO STORE VALUES (20712,'e-MART');
INSERT INTO STORE VALUES (20713,'e-MART');
INSERT INTO STORE VALUES (20714,'e-MART');
INSERT INTO STORE VALUES (20715,'e-MART');

INSERT INTO STORE VALUES (30710,'TESCO');
INSERT INTO STORE VALUES (30711,'TESCO');
INSERT INTO STORE VALUES (30712,'TESCO');
INSERT INTO STORE VALUES (30713,'TESCO');
INSERT INTO STORE VALUES (30714,'TESCO');
INSERT INTO STORE VALUES (30715,'TESCO');

INSERT INTO STORE VALUES (40710,'LOTTE-MART');
INSERT INTO STORE VALUES (40711,'LOTTE-MART');
INSERT INTO STORE VALUES (40712,'LOTTE-MART');
INSERT INTO STORE VALUES (40713,'LOTTE-MART');
INSERT INTO STORE VALUES (40714,'LOTTE-MART');
INSERT INTO STORE VALUES (40715,'LOTTE-MART');

CREATE TABLE IF NOT EXISTS stock (
  pdno int(11) NOT NULL,
  stono varchar(20) NOT NULL,
  stamount int(11) DEFAULT NULL,
  stsales int(11) DEFAULT NULL,
  stprice int(11) DEFAULT NULL,
  PRIMARY KEY (pdno,stono),
  KEY stono (stono),
  CONSTRAINT stock_ibfk_1 FOREIGN KEY (pdno) REFERENCES product (pdno),
  CONSTRAINT stock_ibfk_2 FOREIGN KEY (stono) REFERENCES store (stono)
);

INSERT INTO stock (pdno, stono, stamount, stsales, stprice) VALUES
	(10100001, '10712', 50, 3, 470000),
	(10100001, '10715', 5, 10, 490000),
	(10100001, '20712', 2, 90, 490000),
	(10100001, '20715', 12, 1, 510000),
	(10100001, '30712', 0, 0, 590000),
	(10100001, '30715', 1, 1, 580000),
	(10100001, '40712', 1, 1, 595000),
	(10100001, '40715', 1, 1, 581000),
	(20110001, '10710', 20, 5, 990000),
	(20110001, '10713', 10, 2, 995000),
	(20110001, '20710', 3, 40, 1130000),
	(20110001, '20713', 80, 20, 998000),
	(20110001, '30710', 0, 10, 1240000),
	(20110001, '30713', NULL, NULL, 998000),
	(20110001, '40710', 12, 0, 1010000),
	(20110001, '40713', 4, 2, 998500),
	(30100001, '10711', 30, 1, 1090000),
	(30100001, '10714', 3, 6, 1020000),
	(30100001, '20711', 4, 50, 1110000),
	(30100001, '20714', 34, 23, 1120000),
	(30100001, '30711', 0, 0, 1210000),
	(30100001, '30714', 2, 3, 1170000),
	(30100001, '40711', 0, 0, 1110000),
	(30100001, '40714', 2, 3, 1171000);

COMMIT;